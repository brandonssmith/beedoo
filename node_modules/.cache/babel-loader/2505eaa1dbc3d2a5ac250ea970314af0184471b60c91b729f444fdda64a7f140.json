{"ast":null,"code":"const API_BASE_URL=process.env.NODE_ENV==='production'?'/.netlify/functions/tasks':'http://localhost:8888/.netlify/functions/tasks';export class TaskService{static async loadTasks(){try{console.log('Attempting to load tasks from:',API_BASE_URL);const response=await fetch(API_BASE_URL,{method:'GET',headers:{'Content-Type':'application/json'}});console.log('Response status:',response.status,response.statusText);if(!response.ok){const errorText=await response.text();console.error('Server response:',errorText);throw new Error(`Failed to load tasks: ${response.status} ${response.statusText}`);}const tasks=await response.json();// Convert date strings back to Date objects\nconst convertDates=taskList=>{return taskList.map(task=>({...task,createdAt:new Date(task.createdAt),updatedAt:new Date(task.updatedAt),subtasks:convertDates(task.subtasks||[]),nextSteps:convertDates(task.nextSteps||[])}));};return convertDates(tasks);}catch(error){console.error('Error loading tasks:',error);throw error;}}static async saveTasks(tasks){try{console.log('Attempting to save tasks to:',API_BASE_URL);const response=await fetch(API_BASE_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(tasks)});console.log('Save response status:',response.status,response.statusText);if(!response.ok){const errorText=await response.text();console.error('Server response:',errorText);throw new Error(`Failed to save tasks: ${response.status} ${response.statusText}`);}const result=await response.json();console.log('Tasks saved successfully:',result);}catch(error){console.error('Error saving tasks:',error);throw error;}}static async testConnection(){try{const response=await fetch(API_BASE_URL,{method:'GET',headers:{'Content-Type':'application/json'}});return response.ok;}catch(error){console.error('Connection test failed:',error);return false;}}}","map":{"version":3,"names":["API_BASE_URL","process","env","NODE_ENV","TaskService","loadTasks","console","log","response","fetch","method","headers","status","statusText","ok","errorText","text","error","Error","tasks","json","convertDates","taskList","map","task","createdAt","Date","updatedAt","subtasks","nextSteps","saveTasks","body","JSON","stringify","result","testConnection"],"sources":["C:/Code/beedoo/src/services/taskService.ts"],"sourcesContent":["import { Task } from '../types/Task';\r\n\r\nconst API_BASE_URL = process.env.NODE_ENV === 'production' \r\n  ? '/.netlify/functions/tasks' \r\n  : 'http://localhost:8888/.netlify/functions/tasks';\r\n\r\nexport class TaskService {\r\n  static async loadTasks(): Promise<Task[]> {\r\n    try {\r\n      console.log('Attempting to load tasks from:', API_BASE_URL);\r\n      const response = await fetch(API_BASE_URL, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      console.log('Response status:', response.status, response.statusText);\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        console.error('Server response:', errorText);\r\n        throw new Error(`Failed to load tasks: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const tasks = await response.json();\r\n      \r\n      // Convert date strings back to Date objects\r\n      const convertDates = (taskList: any[]): Task[] => {\r\n        return taskList.map(task => ({\r\n          ...task,\r\n          createdAt: new Date(task.createdAt),\r\n          updatedAt: new Date(task.updatedAt),\r\n          subtasks: convertDates(task.subtasks || []),\r\n          nextSteps: convertDates(task.nextSteps || []),\r\n        }));\r\n      };\r\n\r\n      return convertDates(tasks);\r\n    } catch (error) {\r\n      console.error('Error loading tasks:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async saveTasks(tasks: Task[]): Promise<void> {\r\n    try {\r\n      console.log('Attempting to save tasks to:', API_BASE_URL);\r\n      const response = await fetch(API_BASE_URL, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(tasks),\r\n      });\r\n\r\n      console.log('Save response status:', response.status, response.statusText);\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        console.error('Server response:', errorText);\r\n        throw new Error(`Failed to save tasks: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log('Tasks saved successfully:', result);\r\n    } catch (error) {\r\n      console.error('Error saving tasks:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async testConnection(): Promise<boolean> {\r\n    try {\r\n      const response = await fetch(API_BASE_URL, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n      return response.ok;\r\n    } catch (error) {\r\n      console.error('Connection test failed:', error);\r\n      return false;\r\n    }\r\n  }\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}