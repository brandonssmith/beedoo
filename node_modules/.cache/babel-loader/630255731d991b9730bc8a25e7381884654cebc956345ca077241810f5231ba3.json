{"ast":null,"code":"import React,{useEffect}from'react';import{LexicalComposer}from'@lexical/react/LexicalComposer';import{RichTextPlugin}from'@lexical/react/LexicalRichTextPlugin';import{ContentEditable}from'@lexical/react/LexicalContentEditable';import{HistoryPlugin}from'@lexical/react/LexicalHistoryPlugin';import{AutoFocusPlugin}from'@lexical/react/LexicalAutoFocusPlugin';import{useLexicalComposerContext}from'@lexical/react/LexicalComposerContext';import{$getRoot,$getSelection,$isRangeSelection,$createTextNode}from'lexical';import{Bold,Italic,Underline,List,Link}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// Custom onChange plugin\nfunction CustomOnChangePlugin(_ref){let{onChange}=_ref;const[editor]=useLexicalComposerContext();useEffect(()=>{return editor.registerUpdateListener(_ref2=>{let{editorState}=_ref2;editorState.read(()=>{const root=$getRoot();const text=root.getTextContent();onChange(text);});});},[editor,onChange]);return null;}// Toolbar component\nfunction ToolbarPlugin(){const[editor]=useLexicalComposerContext();const formatText=format=>{editor.update(()=>{const selection=$getSelection();if($isRangeSelection(selection)){selection.formatText(format);}});};const insertLink=()=>{const url=prompt('Enter URL:');if(url){editor.update(()=>{const selection=$getSelection();if($isRangeSelection(selection)){// Insert URL as text for now\nconst textNode=$createTextNode(url);selection.insertNodes([textNode]);}});}};const toggleList=()=>{editor.update(()=>{const selection=$getSelection();if($isRangeSelection(selection)){// Simple list implementation - just add bullet points\nconst text=selection.getTextContent();const lines=text.split('\\n');const formattedLines=lines.map(line=>`• ${line}`);selection.insertText(formattedLines.join('\\n'));}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 p-2 border-b border-gray-200 bg-gray-50\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>formatText('bold'),className:\"p-2 hover:bg-gray-200 rounded\",title:\"Bold\",children:/*#__PURE__*/_jsx(Bold,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>formatText('italic'),className:\"p-2 hover:bg-gray-200 rounded\",title:\"Italic\",children:/*#__PURE__*/_jsx(Italic,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>formatText('underline'),className:\"p-2 hover:bg-gray-200 rounded\",title:\"Underline\",children:/*#__PURE__*/_jsx(Underline,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-px h-6 bg-gray-300\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleList,className:\"p-2 hover:bg-gray-200 rounded\",title:\"Bullet List\",children:/*#__PURE__*/_jsx(List,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:insertLink,className:\"p-2 hover:bg-gray-200 rounded\",title:\"Insert Link\",children:/*#__PURE__*/_jsx(Link,{className:\"w-4 h-4\"})})]});}// Error boundary component\nfunction ErrorBoundary(_ref3){let{children}=_ref3;return/*#__PURE__*/_jsx(\"div\",{children:children});}const RichTextEditor=_ref4=>{let{value,onChange,placeholder=\"Start writing...\",className=\"\"}=_ref4;const initialConfig={namespace:'BeedooRichTextEditor',theme:{root:'outline-none min-h-[200px] p-4',text:{bold:'font-bold',italic:'italic',underline:'underline'}},onError:error=>{console.error('Lexical error:',error);}};return/*#__PURE__*/_jsx(\"div\",{className:`border border-gray-300 rounded-md ${className}`,children:/*#__PURE__*/_jsxs(LexicalComposer,{initialConfig:initialConfig,children:[/*#__PURE__*/_jsx(ToolbarPlugin,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(RichTextPlugin,{contentEditable:/*#__PURE__*/_jsx(ContentEditable,{className:\"outline-none min-h-[200px] p-4\"}),placeholder:/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-4 left-4 text-gray-400 pointer-events-none\",children:placeholder}),ErrorBoundary:ErrorBoundary}),/*#__PURE__*/_jsx(CustomOnChangePlugin,{onChange:onChange}),/*#__PURE__*/_jsx(HistoryPlugin,{}),/*#__PURE__*/_jsx(AutoFocusPlugin,{})]})]})});};export default RichTextEditor;","map":{"version":3,"names":["React","useEffect","LexicalComposer","RichTextPlugin","ContentEditable","HistoryPlugin","AutoFocusPlugin","useLexicalComposerContext","$getRoot","$getSelection","$isRangeSelection","$createTextNode","Bold","Italic","Underline","List","Link","jsx","_jsx","jsxs","_jsxs","CustomOnChangePlugin","_ref","onChange","editor","registerUpdateListener","_ref2","editorState","read","root","text","getTextContent","ToolbarPlugin","formatText","format","update","selection","insertLink","url","prompt","textNode","insertNodes","toggleList","lines","split","formattedLines","map","line","insertText","join","className","children","onClick","title","ErrorBoundary","_ref3","RichTextEditor","_ref4","value","placeholder","initialConfig","namespace","theme","bold","italic","underline","onError","error","console","contentEditable"],"sources":["C:/Code/beedoo/src/components/RichTextEditor.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { LexicalComposer } from '@lexical/react/LexicalComposer';\r\nimport { RichTextPlugin } from '@lexical/react/LexicalRichTextPlugin';\r\nimport { ContentEditable } from '@lexical/react/LexicalContentEditable';\r\nimport { HistoryPlugin } from '@lexical/react/LexicalHistoryPlugin';\r\nimport { AutoFocusPlugin } from '@lexical/react/LexicalAutoFocusPlugin';\r\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\r\nimport { $getRoot, $getSelection, $isRangeSelection, $createTextNode } from 'lexical';\r\nimport { Bold, Italic, Underline, List, Link } from 'lucide-react';\r\n\r\ninterface RichTextEditorProps {\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  placeholder?: string;\r\n  className?: string;\r\n}\r\n\r\n// Custom onChange plugin\r\nfunction CustomOnChangePlugin({ onChange }: { onChange: (value: string) => void }): JSX.Element | null {\r\n  const [editor] = useLexicalComposerContext();\r\n\r\n  useEffect(() => {\r\n    return editor.registerUpdateListener(({ editorState }) => {\r\n      editorState.read(() => {\r\n        const root = $getRoot();\r\n        const text = root.getTextContent();\r\n        onChange(text);\r\n      });\r\n    });\r\n  }, [editor, onChange]);\r\n\r\n  return null;\r\n}\r\n\r\n// Toolbar component\r\nfunction ToolbarPlugin(): JSX.Element {\r\n  const [editor] = useLexicalComposerContext();\r\n\r\n  const formatText = (format: 'bold' | 'italic' | 'underline') => {\r\n    editor.update(() => {\r\n      const selection = $getSelection();\r\n      if ($isRangeSelection(selection)) {\r\n        selection.formatText(format);\r\n      }\r\n    });\r\n  };\r\n\r\n  const insertLink = () => {\r\n    const url = prompt('Enter URL:');\r\n    if (url) {\r\n      editor.update(() => {\r\n        const selection = $getSelection();\r\n        if ($isRangeSelection(selection)) {\r\n          // Insert URL as text for now\r\n          const textNode = $createTextNode(url);\r\n          selection.insertNodes([textNode]);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const toggleList = () => {\r\n    editor.update(() => {\r\n      const selection = $getSelection();\r\n      if ($isRangeSelection(selection)) {\r\n        // Simple list implementation - just add bullet points\r\n        const text = selection.getTextContent();\r\n        const lines = text.split('\\n');\r\n        const formattedLines = lines.map(line => `• ${line}`);\r\n        selection.insertText(formattedLines.join('\\n'));\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-2 p-2 border-b border-gray-200 bg-gray-50\">\r\n      <button\r\n        onClick={() => formatText('bold')}\r\n        className=\"p-2 hover:bg-gray-200 rounded\"\r\n        title=\"Bold\"\r\n      >\r\n        <Bold className=\"w-4 h-4\" />\r\n      </button>\r\n      <button\r\n        onClick={() => formatText('italic')}\r\n        className=\"p-2 hover:bg-gray-200 rounded\"\r\n        title=\"Italic\"\r\n      >\r\n        <Italic className=\"w-4 h-4\" />\r\n      </button>\r\n      <button\r\n        onClick={() => formatText('underline')}\r\n        className=\"p-2 hover:bg-gray-200 rounded\"\r\n        title=\"Underline\"\r\n      >\r\n        <Underline className=\"w-4 h-4\" />\r\n      </button>\r\n      <div className=\"w-px h-6 bg-gray-300\" />\r\n      <button\r\n        onClick={toggleList}\r\n        className=\"p-2 hover:bg-gray-200 rounded\"\r\n        title=\"Bullet List\"\r\n      >\r\n        <List className=\"w-4 h-4\" />\r\n      </button>\r\n      <button\r\n        onClick={insertLink}\r\n        className=\"p-2 hover:bg-gray-200 rounded\"\r\n        title=\"Insert Link\"\r\n      >\r\n        <Link className=\"w-4 h-4\" />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Error boundary component\r\nfunction ErrorBoundary({ children }: { children: React.ReactNode }): JSX.Element {\r\n  return <div>{children}</div>;\r\n}\r\n\r\nconst RichTextEditor: React.FC<RichTextEditorProps> = ({ \r\n  value, \r\n  onChange, \r\n  placeholder = \"Start writing...\",\r\n  className = \"\"\r\n}) => {\r\n  const initialConfig = {\r\n    namespace: 'BeedooRichTextEditor',\r\n    theme: {\r\n      root: 'outline-none min-h-[200px] p-4',\r\n      text: {\r\n        bold: 'font-bold',\r\n        italic: 'italic',\r\n        underline: 'underline',\r\n      },\r\n    },\r\n    onError: (error: Error) => {\r\n      console.error('Lexical error:', error);\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div className={`border border-gray-300 rounded-md ${className}`}>\r\n      <LexicalComposer initialConfig={initialConfig}>\r\n        <ToolbarPlugin />\r\n        <div className=\"relative\">\r\n          <RichTextPlugin\r\n            contentEditable={\r\n              <ContentEditable \r\n                className=\"outline-none min-h-[200px] p-4\"\r\n              />\r\n            }\r\n            placeholder={\r\n              <div className=\"absolute top-4 left-4 text-gray-400 pointer-events-none\">\r\n                {placeholder}\r\n              </div>\r\n            }\r\n            ErrorBoundary={ErrorBoundary}\r\n          />\r\n          <CustomOnChangePlugin onChange={onChange} />\r\n          <HistoryPlugin />\r\n          <AutoFocusPlugin />\r\n        </div>\r\n      </LexicalComposer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RichTextEditor; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,eAAe,KAAQ,gCAAgC,CAChE,OAASC,cAAc,KAAQ,sCAAsC,CACrE,OAASC,eAAe,KAAQ,uCAAuC,CACvE,OAASC,aAAa,KAAQ,qCAAqC,CACnE,OAASC,eAAe,KAAQ,uCAAuC,CACvE,OAASC,yBAAyB,KAAQ,uCAAuC,CACjF,OAASC,QAAQ,CAAEC,aAAa,CAAEC,iBAAiB,CAAEC,eAAe,KAAQ,SAAS,CACrF,OAASC,IAAI,CAAEC,MAAM,CAAEC,SAAS,CAAEC,IAAI,CAAEC,IAAI,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBASnE;AACA,QAAS,CAAAC,oBAAoBA,CAAAC,IAAA,CAA0E,IAAzE,CAAEC,QAAgD,CAAC,CAAAD,IAAA,CAC/E,KAAM,CAACE,MAAM,CAAC,CAAGjB,yBAAyB,CAAC,CAAC,CAE5CN,SAAS,CAAC,IAAM,CACd,MAAO,CAAAuB,MAAM,CAACC,sBAAsB,CAACC,KAAA,EAAqB,IAApB,CAAEC,WAAY,CAAC,CAAAD,KAAA,CACnDC,WAAW,CAACC,IAAI,CAAC,IAAM,CACrB,KAAM,CAAAC,IAAI,CAAGrB,QAAQ,CAAC,CAAC,CACvB,KAAM,CAAAsB,IAAI,CAAGD,IAAI,CAACE,cAAc,CAAC,CAAC,CAClCR,QAAQ,CAACO,IAAI,CAAC,CAChB,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAAE,CAACN,MAAM,CAAED,QAAQ,CAAC,CAAC,CAEtB,MAAO,KAAI,CACb,CAEA;AACA,QAAS,CAAAS,aAAaA,CAAA,CAAgB,CACpC,KAAM,CAACR,MAAM,CAAC,CAAGjB,yBAAyB,CAAC,CAAC,CAE5C,KAAM,CAAA0B,UAAU,CAAIC,MAAuC,EAAK,CAC9DV,MAAM,CAACW,MAAM,CAAC,IAAM,CAClB,KAAM,CAAAC,SAAS,CAAG3B,aAAa,CAAC,CAAC,CACjC,GAAIC,iBAAiB,CAAC0B,SAAS,CAAC,CAAE,CAChCA,SAAS,CAACH,UAAU,CAACC,MAAM,CAAC,CAC9B,CACF,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAG,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAAC,GAAG,CAAGC,MAAM,CAAC,YAAY,CAAC,CAChC,GAAID,GAAG,CAAE,CACPd,MAAM,CAACW,MAAM,CAAC,IAAM,CAClB,KAAM,CAAAC,SAAS,CAAG3B,aAAa,CAAC,CAAC,CACjC,GAAIC,iBAAiB,CAAC0B,SAAS,CAAC,CAAE,CAChC;AACA,KAAM,CAAAI,QAAQ,CAAG7B,eAAe,CAAC2B,GAAG,CAAC,CACrCF,SAAS,CAACK,WAAW,CAAC,CAACD,QAAQ,CAAC,CAAC,CACnC,CACF,CAAC,CAAC,CACJ,CACF,CAAC,CAED,KAAM,CAAAE,UAAU,CAAGA,CAAA,GAAM,CACvBlB,MAAM,CAACW,MAAM,CAAC,IAAM,CAClB,KAAM,CAAAC,SAAS,CAAG3B,aAAa,CAAC,CAAC,CACjC,GAAIC,iBAAiB,CAAC0B,SAAS,CAAC,CAAE,CAChC;AACA,KAAM,CAAAN,IAAI,CAAGM,SAAS,CAACL,cAAc,CAAC,CAAC,CACvC,KAAM,CAAAY,KAAK,CAAGb,IAAI,CAACc,KAAK,CAAC,IAAI,CAAC,CAC9B,KAAM,CAAAC,cAAc,CAAGF,KAAK,CAACG,GAAG,CAACC,IAAI,EAAI,KAAKA,IAAI,EAAE,CAAC,CACrDX,SAAS,CAACY,UAAU,CAACH,cAAc,CAACI,IAAI,CAAC,IAAI,CAAC,CAAC,CACjD,CACF,CAAC,CAAC,CACJ,CAAC,CAED,mBACE7B,KAAA,QAAK8B,SAAS,CAAC,iEAAiE,CAAAC,QAAA,eAC9EjC,IAAA,WACEkC,OAAO,CAAEA,CAAA,GAAMnB,UAAU,CAAC,MAAM,CAAE,CAClCiB,SAAS,CAAC,+BAA+B,CACzCG,KAAK,CAAC,MAAM,CAAAF,QAAA,cAEZjC,IAAA,CAACN,IAAI,EAACsC,SAAS,CAAC,SAAS,CAAE,CAAC,CACtB,CAAC,cACThC,IAAA,WACEkC,OAAO,CAAEA,CAAA,GAAMnB,UAAU,CAAC,QAAQ,CAAE,CACpCiB,SAAS,CAAC,+BAA+B,CACzCG,KAAK,CAAC,QAAQ,CAAAF,QAAA,cAEdjC,IAAA,CAACL,MAAM,EAACqC,SAAS,CAAC,SAAS,CAAE,CAAC,CACxB,CAAC,cACThC,IAAA,WACEkC,OAAO,CAAEA,CAAA,GAAMnB,UAAU,CAAC,WAAW,CAAE,CACvCiB,SAAS,CAAC,+BAA+B,CACzCG,KAAK,CAAC,WAAW,CAAAF,QAAA,cAEjBjC,IAAA,CAACJ,SAAS,EAACoC,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3B,CAAC,cACThC,IAAA,QAAKgC,SAAS,CAAC,sBAAsB,CAAE,CAAC,cACxChC,IAAA,WACEkC,OAAO,CAAEV,UAAW,CACpBQ,SAAS,CAAC,+BAA+B,CACzCG,KAAK,CAAC,aAAa,CAAAF,QAAA,cAEnBjC,IAAA,CAACH,IAAI,EAACmC,SAAS,CAAC,SAAS,CAAE,CAAC,CACtB,CAAC,cACThC,IAAA,WACEkC,OAAO,CAAEf,UAAW,CACpBa,SAAS,CAAC,+BAA+B,CACzCG,KAAK,CAAC,aAAa,CAAAF,QAAA,cAEnBjC,IAAA,CAACF,IAAI,EAACkC,SAAS,CAAC,SAAS,CAAE,CAAC,CACtB,CAAC,EACN,CAAC,CAEV,CAEA;AACA,QAAS,CAAAI,aAAaA,CAAAC,KAAA,CAA2D,IAA1D,CAAEJ,QAAwC,CAAC,CAAAI,KAAA,CAChE,mBAAOrC,IAAA,QAAAiC,QAAA,CAAMA,QAAQ,CAAM,CAAC,CAC9B,CAEA,KAAM,CAAAK,cAA6C,CAAGC,KAAA,EAKhD,IALiD,CACrDC,KAAK,CACLnC,QAAQ,CACRoC,WAAW,CAAG,kBAAkB,CAChCT,SAAS,CAAG,EACd,CAAC,CAAAO,KAAA,CACC,KAAM,CAAAG,aAAa,CAAG,CACpBC,SAAS,CAAE,sBAAsB,CACjCC,KAAK,CAAE,CACLjC,IAAI,CAAE,gCAAgC,CACtCC,IAAI,CAAE,CACJiC,IAAI,CAAE,WAAW,CACjBC,MAAM,CAAE,QAAQ,CAChBC,SAAS,CAAE,WACb,CACF,CAAC,CACDC,OAAO,CAAGC,KAAY,EAAK,CACzBC,OAAO,CAACD,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACxC,CACF,CAAC,CAED,mBACEjD,IAAA,QAAKgC,SAAS,CAAE,qCAAqCA,SAAS,EAAG,CAAAC,QAAA,cAC/D/B,KAAA,CAAClB,eAAe,EAAC0D,aAAa,CAAEA,aAAc,CAAAT,QAAA,eAC5CjC,IAAA,CAACc,aAAa,GAAE,CAAC,cACjBZ,KAAA,QAAK8B,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBjC,IAAA,CAACf,cAAc,EACbkE,eAAe,cACbnD,IAAA,CAACd,eAAe,EACd8C,SAAS,CAAC,gCAAgC,CAC3C,CACF,CACDS,WAAW,cACTzC,IAAA,QAAKgC,SAAS,CAAC,yDAAyD,CAAAC,QAAA,CACrEQ,WAAW,CACT,CACN,CACDL,aAAa,CAAEA,aAAc,CAC9B,CAAC,cACFpC,IAAA,CAACG,oBAAoB,EAACE,QAAQ,CAAEA,QAAS,CAAE,CAAC,cAC5CL,IAAA,CAACb,aAAa,GAAE,CAAC,cACjBa,IAAA,CAACZ,eAAe,GAAE,CAAC,EAChB,CAAC,EACS,CAAC,CACf,CAAC,CAEV,CAAC,CAED,cAAe,CAAAkD,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}