{"ast":null,"code":"const API_BASE_URL = process.env.NODE_ENV === 'production' ? '/.netlify/functions/tasks' : 'http://localhost:8888/.netlify/functions/tasks';\nexport class TaskService {\n  static async loadTasks() {\n    try {\n      console.log('Attempting to load tasks from:', API_BASE_URL);\n      const response = await fetch(API_BASE_URL, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      console.log('Response status:', response.status, response.statusText);\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Server response:', errorText);\n        throw new Error(`Failed to load tasks: ${response.status} ${response.statusText}`);\n      }\n      const tasks = await response.json();\n\n      // Convert date strings back to Date objects\n      const convertDates = taskList => {\n        return taskList.map(task => ({\n          ...task,\n          createdAt: new Date(task.createdAt),\n          updatedAt: new Date(task.updatedAt),\n          subtasks: convertDates(task.subtasks || []),\n          nextSteps: convertDates(task.nextSteps || [])\n        }));\n      };\n      return convertDates(tasks);\n    } catch (error) {\n      console.error('Error loading tasks:', error);\n      throw error;\n    }\n  }\n  static async saveTasks(tasks) {\n    try {\n      console.log('Attempting to save tasks to:', API_BASE_URL);\n      const response = await fetch(API_BASE_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(tasks)\n      });\n      console.log('Save response status:', response.status, response.statusText);\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Server response:', errorText);\n        throw new Error(`Failed to save tasks: ${response.status} ${response.statusText}`);\n      }\n      const result = await response.json();\n      console.log('Tasks saved successfully:', result);\n    } catch (error) {\n      console.error('Error saving tasks:', error);\n      throw error;\n    }\n  }\n  static async testConnection() {\n    try {\n      const response = await fetch(API_BASE_URL, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      return response.ok;\n    } catch (error) {\n      console.error('Connection test failed:', error);\n      return false;\n    }\n  }\n}","map":{"version":3,"names":["API_BASE_URL","process","env","NODE_ENV","TaskService","loadTasks","console","log","response","fetch","method","headers","status","statusText","ok","errorText","text","error","Error","tasks","json","convertDates","taskList","map","task","createdAt","Date","updatedAt","subtasks","nextSteps","saveTasks","body","JSON","stringify","result","testConnection"],"sources":["C:/Code/beedoo/src/services/taskService.ts"],"sourcesContent":["import { Task } from '../types/Task';\r\n\r\nconst API_BASE_URL = process.env.NODE_ENV === 'production' \r\n  ? '/.netlify/functions/tasks' \r\n  : 'http://localhost:8888/.netlify/functions/tasks';\r\n\r\nexport class TaskService {\r\n  static async loadTasks(): Promise<Task[]> {\r\n    try {\r\n      console.log('Attempting to load tasks from:', API_BASE_URL);\r\n      const response = await fetch(API_BASE_URL, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      console.log('Response status:', response.status, response.statusText);\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        console.error('Server response:', errorText);\r\n        throw new Error(`Failed to load tasks: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const tasks = await response.json();\r\n      \r\n      // Convert date strings back to Date objects\r\n      const convertDates = (taskList: any[]): Task[] => {\r\n        return taskList.map(task => ({\r\n          ...task,\r\n          createdAt: new Date(task.createdAt),\r\n          updatedAt: new Date(task.updatedAt),\r\n          subtasks: convertDates(task.subtasks || []),\r\n          nextSteps: convertDates(task.nextSteps || []),\r\n        }));\r\n      };\r\n\r\n      return convertDates(tasks);\r\n    } catch (error) {\r\n      console.error('Error loading tasks:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async saveTasks(tasks: Task[]): Promise<void> {\r\n    try {\r\n      console.log('Attempting to save tasks to:', API_BASE_URL);\r\n      const response = await fetch(API_BASE_URL, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(tasks),\r\n      });\r\n\r\n      console.log('Save response status:', response.status, response.statusText);\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        console.error('Server response:', errorText);\r\n        throw new Error(`Failed to save tasks: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log('Tasks saved successfully:', result);\r\n    } catch (error) {\r\n      console.error('Error saving tasks:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async testConnection(): Promise<boolean> {\r\n    try {\r\n      const response = await fetch(API_BASE_URL, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n      return response.ok;\r\n    } catch (error) {\r\n      console.error('Connection test failed:', error);\r\n      return false;\r\n    }\r\n  }\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}