{"ast":null,"code":"/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { $getSelection as e, $isRangeSelection as t, $isTextNode as n } from \"lexical\";\nfunction o(o) {\n  const i = window.location.origin,\n    a = a => {\n      if (a.origin !== i) return;\n      const r = o.getRootElement();\n      if (document.activeElement !== r) return;\n      const s = a.data;\n      if (\"string\" == typeof s) {\n        let i;\n        try {\n          i = JSON.parse(s);\n        } catch (e) {\n          return;\n        }\n        if (i && \"nuanria_messaging\" === i.protocol && \"request\" === i.type) {\n          const r = i.payload;\n          if (r && \"makeChanges\" === r.functionId) {\n            const i = r.args;\n            if (i) {\n              const [r, s, c, g, d, f] = i;\n              o.update(() => {\n                const o = e();\n                if (t(o)) {\n                  const e = o.anchor;\n                  let t = e.getNode(),\n                    i = 0,\n                    f = 0;\n                  if (n(t) && r >= 0 && s >= 0 && (i = r, f = r + s, o.setTextNodeRange(t, i, t, f)), i === f && \"\" === c || (o.insertRawText(c), t = e.getNode()), n(t)) {\n                    i = g, f = g + d;\n                    const e = t.getTextContentSize();\n                    i = i > e ? e : i, f = f > e ? e : f, o.setTextNodeRange(t, i, t, f);\n                  }\n                  a.stopImmediatePropagation();\n                }\n              });\n            }\n          }\n        }\n      }\n    };\n  return window.addEventListener(\"message\", a, !0), () => {\n    window.removeEventListener(\"message\", a, !0);\n  };\n}\nexport { o as registerDragonSupport };","map":{"version":3,"names":["$getSelection","e","$isRangeSelection","t","$isTextNode","n","o","i","window","location","origin","a","r","getRootElement","document","activeElement","s","data","JSON","parse","protocol","type","payload","functionId","args","c","g","d","f","update","anchor","getNode","setTextNodeRange","insertRawText","getTextContentSize","stopImmediatePropagation","addEventListener","removeEventListener","registerDragonSupport"],"sources":["C:/Code/beedoo/node_modules/@lexical/dragon/LexicalDragon.prod.mjs"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{$getSelection as e,$isRangeSelection as t,$isTextNode as n}from\"lexical\";function o(o){const i=window.location.origin,a=a=>{if(a.origin!==i)return;const r=o.getRootElement();if(document.activeElement!==r)return;const s=a.data;if(\"string\"==typeof s){let i;try{i=JSON.parse(s)}catch(e){return}if(i&&\"nuanria_messaging\"===i.protocol&&\"request\"===i.type){const r=i.payload;if(r&&\"makeChanges\"===r.functionId){const i=r.args;if(i){const[r,s,c,g,d,f]=i;o.update((()=>{const o=e();if(t(o)){const e=o.anchor;let t=e.getNode(),i=0,f=0;if(n(t)&&r>=0&&s>=0&&(i=r,f=r+s,o.setTextNodeRange(t,i,t,f)),i===f&&\"\"===c||(o.insertRawText(c),t=e.getNode()),n(t)){i=g,f=g+d;const e=t.getTextContentSize();i=i>e?e:i,f=f>e?e:f,o.setTextNodeRange(t,i,t,f)}a.stopImmediatePropagation()}}))}}}}};return window.addEventListener(\"message\",a,!0),()=>{window.removeEventListener(\"message\",a,!0)}}export{o as registerDragonSupport};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}